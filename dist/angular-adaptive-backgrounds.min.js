/*
  angular-adaptive-backgrounds v0.1.0
  http://brandly.github.io/angular-adaptive-backgrounds/
*/
(function(){angular.module("mb-adaptive-backgrounds",["ng"]).directive("adaptiveBackground",function(){!function(n){"use strict";var t=function(){return document.createElement("canvas").getContext("2d")},e=function(n,e){var a=new Image,r=n.src||n;"data:"!==r.substring(0,5)&&(a.crossOrigin="Anonymous"),a.onload=function(){var n=t("2d");n.drawImage(a,0,0);var r=n.getImageData(0,0,a.width,a.height);e&&e(r.data)},a.src=r},a=function(n){return["rgb(",n,")"].join("")},r=function(n){return n.map(function(n){return a(n.name)})},o=5,i=10,u={};u.colors=function(n,t){t=t||{};var u=t.exclude||[],c=t.paletteSize||i;e(n,function(e){for(var i=n.width*n.height||e.length,l={},d="",s=[],m={dominant:{name:"",count:0},palette:Array.apply(null,new Array(c)).map(Boolean).map(function(){return{name:"0,0,0",count:0}})},f=0;i>f;){if(s[0]=e[f],s[1]=e[f+1],s[2]=e[f+2],d=s.join(","),l[d]=d in l?l[d]+1:1,-1===u.indexOf(a(d))){var g=l[d];g>m.dominant.count?(m.dominant.name=d,m.dominant.count=g):m.palette.some(function(n){return g>n.count?(n.name=d,n.count=g,!0):void 0})}f+=4*o}if(t.success){var p=r(m.palette);t.success({dominant:a(m.dominant.name),secondary:p[0],palette:p})}})},n.RGBaster=n.RGBaster||u}(window);var n,t;return n={parent:null,exclude:["rgb(0,0,0)","rgba(255,255,255)"],normalizeTextColor:!1,normalizedTextColors:{light:"#fff",dark:"#000"},lumaClasses:{light:"ab-light",dark:"ab-dark"}},t=n,{restrict:"A",link:function(n,e){var a,r;return a=e[0],r=function(n){var t;return t=e.parent(),t.css("backgroundColor",n)},RGBaster.colors(a,{paletteSize:20,exclude:t.exclude,success:function(n){return r(n.dominant,n.palette)}})}}})}).call(this);